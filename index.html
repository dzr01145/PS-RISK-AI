<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>あかねチャットボット</title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: "Segoe UI", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
      line-height: 1.6;
      background: #f8f0f0;
      color: #2c1813;
    }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem 1rem;
      background: radial-gradient(circle at top, rgba(255, 139, 139, 0.35), transparent 60%), linear-gradient(120deg, #fef2f2, #ffe5e5);
    }
    main {
      width: min(720px, 96vw);
      background: rgba(255, 255, 255, 0.92);
      border-radius: 24px;
      box-shadow: 0 24px 48px rgba(178, 34, 34, 0.18);
      overflow: hidden;
      backdrop-filter: blur(8px);
    }
    header {
      padding: clamp(1.6rem, 4vw, 2.4rem);
      border-bottom: 1px solid rgba(200, 29, 37, 0.2);
      background: linear-gradient(135deg, rgba(200, 29, 37, 0.12), rgba(253, 123, 136, 0.12));
    }
    h1 {
      margin: 0 0 0.4rem;
      font-size: clamp(2rem, 4vw, 2.6rem);
      color: #c81d25;
      letter-spacing: 0.08em;
    }
    p {
      margin: 0;
    }
    .tagline {
      font-weight: 600;
      font-size: clamp(1rem, 2.3vw, 1.1rem);
      color: #a11a21;
    }
    footer {
      padding-top: 0.7rem;
      font-size: 0.85rem;
      color: rgba(122, 18, 24, 0.75);
    }
    .chat-wrapper {
      display: grid;
      grid-template-rows: 1fr auto;
      height: min(70vh, 540px);
    }
    .messages {
      padding: clamp(1.2rem, 3vw, 1.8rem);
      overflow-y: auto;
      scroll-behavior: smooth;
    }
    .bubble {
      max-width: clamp(70%, 360px, 90%);
      padding: 0.9rem 1.1rem;
      margin-bottom: 0.9rem;
      border-radius: 18px;
      white-space: pre-wrap;
      word-break: break-word;
      box-shadow: 0 14px 22px rgba(0, 0, 0, 0.05);
    }
    .bubble.bot {
      background: #fff4f4;
      border: 1px solid rgba(200, 29, 37, 0.2);
      color: #7a1218;
      margin-right: auto;
    }
    .bubble.user {
      background: #c81d25;
      color: #fff;
      margin-left: auto;
    }
    form {
      display: flex;
      gap: 0.8rem;
      padding: clamp(1rem, 3vw, 1.4rem);
      background: rgba(255, 255, 255, 0.95);
      border-top: 1px solid rgba(200, 29, 37, 0.15);
    }
    input[type="text"] {
      flex: 1;
      border: 1px solid rgba(200, 29, 37, 0.4);
      border-radius: 999px;
      padding: 0.9rem 1.2rem;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.9);
      color: inherit;
    }
    input[type="text"]:focus {
      outline: 3px solid rgba(200, 29, 37, 0.2);
      border-color: #c81d25;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 0.9rem 1.8rem;
      background: #c81d25;
      color: #fff;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(200, 29, 37, 0.24);
    }
    button:disabled {
      cursor: not-allowed;
      background: #d57676;
      box-shadow: none;
    }
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    @media (max-width: 540px) {
      .chat-wrapper {
        height: 75vh;
      }
      button {
        padding: 0.9rem 1.2rem;
      }
    }
  </style>
</head>
<body>
  <main>
    <header>
      <h1>あかねチャットボット</h1>
      <p class="tagline">気軽に使えるミニアシスタント。外部APIを使わない、安心設計です。</p>
      <footer>※ ブラウザ内でのみ動作し、会話内容はサーバーへ送信されません。</footer>
    </header>
    <div class="chat-wrapper">
      <section class="messages" id="messages" aria-live="polite"></section>
      <form id="chat-form" autocomplete="off">
        <label class="sr-only" for="chat-input">メッセージを入力</label>
        <input id="chat-input" type="text" name="message" placeholder="メッセージを入力..." required>
        <button type="submit">送信</button>
      </form>
    </div>
  </main>
  <script>
    (() => {
      const form = document.getElementById('chat-form');
      const input = document.getElementById('chat-input');
      const messages = document.getElementById('messages');

      const addMessage = (text, sender) => {
        const bubble = document.createElement('div');
        bubble.className = `bubble ${sender}`;
        bubble.textContent = text;
        messages.appendChild(bubble);
        messages.scrollTop = messages.scrollHeight;
      };

      const normalize = (text) => text.trim().toLowerCase();

      const getBotReply = (rawInput) => {
        const text = normalize(rawInput);
        if (!text) {
          return '入力内容が空のようです。何か質問してみてください。';
        }
        if (/(こんにちは|こんちは|やあ|hi|hello)/.test(text)) {
          return 'こんにちは！あかねです。ちょっとした相談や雑談ならお任せください。';
        }
        if (/(時間|じかん)/.test(text)) {
          const now = new Date();
          const time = now.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
          return `ただいまの時刻は ${time} ごろです。`;
        }
        if (/(日付|何日|きょう|今日)/.test(text)) {
          const date = new Date().toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric' });
          return `今日は ${date} です。`;
        }
        if (/(天気|てんき)/.test(text)) {
          return 'リアルタイムの天気データは取得していませんが、外の様子をチェックしてからお出かけくださいね。';
        }
        if (/(名前|なまえ)/.test(text)) {
          return '私は「あかねチャットボット」です。赤が好きなデジタルアシスタントです！';
        }
        if (/(おすすめ|レコメンド|何かいい)/.test(text)) {
          return '短い休憩には深呼吸がおすすめです。目を閉じて5秒吸って5秒吐くのを3回どうぞ。';
        }
        if (text.length > 80) {
          return '長文ありがとうございます！要点を少し分けて送ると、もう少し的確にお返事できます。';
        }
        return 'うまく聞き取れませんでした。挨拶や時間・天気などについて話しかけてみてください。';
      };

      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const userInput = input.value;
        addMessage(userInput, 'user');
        input.value = '';
        input.focus();

        window.setTimeout(() => {
          const reply = getBotReply(userInput);
          addMessage(reply, 'bot');
        }, 350);
      });

      addMessage('こんにちは！あかねです。何か話しかけてみてください。', 'bot');
    })();
  </script>
</body>
</html>
